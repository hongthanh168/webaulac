@model System.Data.DataTable

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int year = DateTime.Now.Year;
    string tieuDe = "LỊCH KIỂM TRA NĂM " + year.ToString();
    System.Data.DataTable dt = Model;
    List<string> listLoaiKT = (List<string>)ViewBag.listLoaiKT;
    int soCot = listLoaiKT.Count;
}

@section huongdan{
    <text>@tieuDe</text>
}

<p>
    <a data-modal href="@Url.Action("Create", "LichKiemTras")" class="btn btn-primary"><i class="fa fa-plus m-right-xs"></i>Thêm mới</a>
    <a href="@Url.Action("Index", "LichKiemTras")" class="btn btn-info"><i class="fa fa-info m-right-xs"></i>Xem theo tháng</a>
</p>

<table id="PlanList" class="table table-bordered table-hover table-striped">
    <thead>
        <tr>
            <th>STT</th>
            <th></th>
            @foreach (var item in listLoaiKT)
            {
                <th>
                    @item
                </th>
            }
        </tr>

    </thead>
    <tbody>
        @{
            int stt = 1;
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                <tr>
                    <td>@stt</td>
                    <td>@dt.Rows[i][0]</td>
                    @foreach (var item2 in listLoaiKT)
                    {
                        <td>@Html.Raw(dt.Rows[i][item2])</td>
                    }
                </tr>
                stt++;
            }
        }
    </tbody>
</table>

@section Styles{
    @Styles.Render("~/vendors/DataTables/css")
    @Styles.Render("~/vendors/DataTables/Buttons/css")
}
@section scripts{
    @Scripts.Render("~/vendors/DataTables/js")
    @Scripts.Render("~/vendors/DataTables/Buttons/js")
    @Scripts.Render("~/bundles/jqueryval")
    <!--modal form-->
    @Scripts.Render("~/bundles/modalform")

    <script language="javascript">
        $(document).ready(function () {
            $('a[name=link_popover]').popover({

            });
            var t = $('#PlanList').DataTable({
                "language": {
                    "url": "/vendors/DataTables/langs/Vietnamese.json"
                },
                "columnDefs": [{
                    "searchable": false,
                    "orderable": false,
                    "targets": 0
                }]
            });
            t.on('order.dt search.dt', function () {
                t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw();
        });
    </script>
}


